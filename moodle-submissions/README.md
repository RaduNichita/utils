unarchive-submissions.sh
========================


The script takes an archive generated by moodle when using the "Download all submissions" action for an assignment.

Usage:
`unarchive-submissions.sh [OPTION] submission-archive [selection] [select-file]`

By default for a call of `unarchive-submissions.sh assignment.zip`, the script produces the following structure in the current directory:

    current directory
    |
    └─ assignment		// a directory with the same name as the archive
        |
        └─ 1original
        └─ 2unarchived
        └─ 3selected

**`1original`** contains the original, unzipped, content of the archive, with 1 directory per student.

**`2unarchived`** contains one directory per student, with the following properties:
 - the name of the directory is `Firstname LASTNAME`
 - if the student uploaded at least one archive, the first archive is unzipped
  - this works for `.zip` and `.tar.gz` / `.tgz` archives
  - only the first archive is unzipped in order to avoid potential problems with overwrites

**`3selected`** contains the _selected_ students, if any such selection was made, or again all students
 - if the `-np` option was used, the names of directories are `LASTNAME Firstname`
 
Currently, the output of the script is quite verbose, detailing every phase and what has been done for every student.


OPTIONS:
 - *-np* - switches name and surname in the `3selected` output directory. Note that for more special names this option may not work correctly.
 - *-a* - the assignments allowed both _Online submission_ and _File submissions_ modalities. In this case the online submission will also be present in the output directories.
 
The **`selection`** argument can specify the name of a text file containing a list of names. 
The `3selected` output directory will only contain the submissions of these students. 
The names of the students should be specified in `Firstname-Firstname-Firstname LASTNAME-LASTNAME` form (exactly as they are enrolled on moodle,
regardless of the `-np` option.

If all students should be selected, the `all` value should be used.

If the **`select-file`** argument is present (can be a file name, e.g. `"tema.txt"`, or a pattern, e.g. `"*.txt"`), 
an additional output folder will be created, name `4files` with a flat structure, 
which will contain all files with the given name or matching the given pattern, found in the selected students' submissions. 
Each file will be prefixed with the name of the student (according to the presence or absence of the `-np` option).

